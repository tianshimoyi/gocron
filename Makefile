build:
	go build -o dist/gocron -a -ldflags "-w -s" ./cmd/gocron-server


fmt:
	gofmt -s -w ./


checkfmt:
	@echo checking gofmt...
	@res=$$(gofmt -d -e -s $$(find . -type d \( -path ./src/vendor -o -path ./tests \) -prune -o -name '*.go' -print)); \
	if [ -n "$${res}" ]; then \
		echo checking gofmt fail... ; \
		echo "$${res}"; \
		exit 1; \
	fi

swagger:
	go run tools/doc-gen/main.go --output=swagger-ui/swagger.json

swagger-server:
	go run swagger-ui/swagger.go